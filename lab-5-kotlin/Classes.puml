@startuml
'https://plantuml.com/sequence-diagram

Class Coordinates {
    - Double x
    - Double y
}
class Label {
    - long bands
}
enum MusicGanre {
    PROGRESSIVE_ROCK
    RAP
    BLUES
    PUNK_ROCK
}
class MusicBand {
    - Integer id
    - String name
    - Coordinates coordinates
    - java.time.LocalDate creationDate {auto}
    - int numberOfParticipants {>0}
    - long albumsCount {>0}
    - java.util.Date? establishmentDate
    - MusicGenre genre
    - Label label
}

Coordinates --* MusicBand::coordinates
Label -up-* MusicBand::label
MusicGanre --* MusicBand::genre

class MusicBandStorage #AAFFAA {
    - LinkedHashSet<MusicBand> storage
    - {auto} sort()

}

MusicBand -* MusicBandStorage
abstract class Command {
    - MusicBandStorage target
    - String cmdName {get}
    - String description {get}

    ~ void exec()
}
'interface ICommand {
'}
object commands{
    + help()
    + info()
    + show()
    + add(MusicBand)
    + update_id(int id)
    + remove_by_id(int id)
    + clear()
    + save()
    + execute_script(String fileName)
    + exit()
    + add_if_max(MusicBand)
    + remove_greater(MusicBand)
    + history() //last 6
    + average_of_number_of_participants()
    + count_less_than_albums_count(long albumsCount)
    + print_ascending()
    + load()
    + ...()
}

commands -|> Command


class StorageManager #AAFFAA {
    - Queue history
    - Map<String, Command> commands
    - read() - ????
    + Bool validateCmd(String)
    + void executeCmd(Message)
}

class JavaDoc << (J, #FFCC99)>> #FFDD99
Main .up.> JavaDoc

class com.fasterxml.jackson.module.kotlin.jacksonObjectMapper << (J, #FFCC99)>> #FFDD99
class com.fasterxml.jackson.module.kotlin.readValue << (J, #FFCC99)>> #FFDD99
StorageManager o-- com.fasterxml.jackson.module.kotlin.readValue
StorageManager o-- com.fasterxml.jackson.module.kotlin.jacksonObjectMapper

class java.io.InputStreamReader << (C, #EEAAAA) >> #EFCCCC
class java.io.PrintWriter << (C, #EEAAAA) >> #EFCCCC
StorageManager o-- java.io.InputStreamReader
StorageManager o-- java.io.PrintWriter


class java.util.LinkedHashSet << (C, #EEAAAA) >> #EFCCCC
MusicBandStorage *-up- java.util.LinkedHashSet

class IOStream << (C, #EEEE99)>> #FFEE99{
    + void write()
    + void writeln()
    + boolean yesAnswer()
    + MusicBand readMusicBand()
    + String readString()
    + int readInt()
    + ...()
}
Command o- IOStream
IOStream --o StorageManager
commands::load o- IOStream
commands::save o- IOStream

Command --o StorageManager
'(Command,StorageManager) - ICommand

MusicBandStorage -* StorageManager

StorageManager <-> Main

@enduml